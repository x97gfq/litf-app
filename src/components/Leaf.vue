<template>
    <div class="leaf">
      <p class="popup">
        Resource: {{ selectedResource.name }}<br/>
        Website: 
        <a :href="selectedResource.website" target="new">
          {{ selectedResource.website }}
        </a>
      </p>
    </div>
</template>

<style scoped>
.leaf {
  padding: 20px;
  background: gray;
  height: 100%;
}
a {
  color: blue;
}
</style>

<script>
export default {
  name: 'Leaf',
  props: {
  
  },
  data () {
    return {
      resources: [],
      selectedResource: []
    }
  },
  methods: {
    getResources () {
      this.resources = this.$store.getters.getResourceList;
    },
    chooseResource () {
      // need algorithm to choose nearest resource (using latitude/longitude?)
      // if location data is available
      //
      //
      console.log(this.latitude); // <-- our current latitude
      console.log(this.longitude); // <-- our current longitude
      //
      //
      // iterate over resources and print the name of each to the console
      this.resources.forEach(resource => {
        console.log(resource.name)
        console.log(resource.latitude) /* this resource's latitude */
        console.log(resource.longitude) /* this resource's longitude */
      });
      //
      //
      // for now, choose a random resource
      var randomNumber = Math.floor(Math.random() * this.resources.length);
      this.selectedResource = this.resources[randomNumber];
      //
      //
      console.log(this.selectedResource);
      //
      //
    }
  },
  mounted() {
    this.getResources();
    this.chooseResource();
  },
  computed: {
    latitude() {
      var location = this.$store.getters.getLocation;
      if (location != null) {
          return location.coords.latitude;
      } else {
          return "";
      }
    },
    longitude() {
      var location = this.$store.getters.getLocation;
      if (location != null) {
          return location.coords.longitude;
      } else {
          return "";
      }
    }
  }
}
</script>